<?xml version="1.0"?>
<metainfo>
    <schemaVersion>2.0</schemaVersion>
    <services>
      <service>
	<name>HUE</name>
	<displayName>Hue</displayName>
	<comment>Hadoop UI系统,实现在Web控制台与Hadoop集群进行交互来分析和处理数据。</comment>
	<version>3.9.0</version>
	<components>
	  <component>
	    <name>HUE_SERVER</name>
	    <displayName>Hue Server</displayName>
	    <category>MASTER</category>
	    <cardinality>1</cardinality>
	    <commandScript>
	      <script>scripts/hue_server.py</script>
	      <scriptType>PYTHON</scriptType>
	      <timeout>1200</timeout>
	    </commandScript>
	    <customCommands>
	      <customCommand>
		<name>UserSync</name>
		<background>true</background>
		<commandScript>
		  <script>scripts/hue_server.py</script>
		  <scriptType>PYTHON</scriptType>
		</commandScript>
	      </customCommand>
	      <customCommand>
		<name>DatabaseSync</name>
		<background>true</background>
		<commandScript>
		  <script>scripts/hue_server.py</script>
		  <scriptType>PYTHON</scriptType>
		  </commandScript>
	      </customCommand>
	      <customCommand>
		<name>AddConfigurations</name>
		<commandScript>
		  <script>scripts/hue_server.py</script>
		  <scriptType>PYTHON</scriptType>
		</commandScript>
	      </customCommand>
	    </customCommands>
	  </component>

	  <component>
	    <name>LIVY_SERVER</name>
	    <displayName>Livy Server</displayName>
	    <category>SLAVE</category>
	    <cardinality>0+</cardinality>
	    <versionAdvertised>true</versionAdvertised>
	    <commandScript>
	      <script>scripts/livy_server.py</script>
	      <scriptType>PYTHON</scriptType>
	      <timeout>1200</timeout>
	    </commandScript>
	    <dependencies>
	      <dependency>
		<name>HDFS/HDFS_CLIENT</name>
		<scope>host</scope>
		<auto-deploy>
		  <enabled>true</enabled>
		</auto-deploy>
	      </dependency>
	      <dependency>
	        <name>SPARK/SPARK_CLIENT</name>
	        <scope>host</scope>
		<auto-deploy>
		  <enabled>true</enabled>
		</auto-deploy>
	      </dependency>
	      <dependency>
			<name>SPARK/SPARK_THRIFTSERVER</name>
			<scope>cluster</scope>
	      </dependency>
	    </dependencies>
	  </component>

	</components>
	<osSpecifics>
	  <osSpecific>
	    <osFamily>any</osFamily>
	    <packages>
	      <package><name>wget</name></package>   
	      <package><name>tar</name></package>
	      <package><name>asciidoc</name></package>
	      <package><name>krb5-devel</name></package>
	      <package><name>libxml2-devel</name></package>
	      <package><name>libxslt-devel</name></package>		   
	      <package><name>openldap-devel</name></package>
	      <package><name>python-devel</name></package>
	      <package><name>python-simplejson</name></package>
	      <package><name>python-setuptools</name></package>
	      <package><name>sqlite-devel</name></package>
	      <package><name>rsync</name></package>
	      <package><name>saslwrapper-devel</name></package>
	      <package><name>pycrypto</name></package>
	      <package><name>gmp-devel</name></package>
	      <package><name>libyaml-devel</name></package>
	      <package><name>cyrus-sasl-plain</name></package>
	      <package><name>cyrus-sasl-devel</name></package>
	      <package><name>cyrus-sasl-gssapi</name></package>
	      <package><name>libffi-devel</name></package>
            </packages>
	  </osSpecific>
	</osSpecifics>
	<configuration-dependencies>
	  <config-type>hue-Desktop</config-type>
	  <config-type>hue-Hadoop</config-type>
	  <config-type>hue-Hive</config-type>
	  <config-type>hue-Hbase</config-type>
	  <config-type>hue-Zookeeper</config-type>
	  <config-type>hue-Oozie</config-type>
	  <config-type>hue-Pig</config-type>
	  <config-type>hue-Spark</config-type>
	  <config-type>hue-RDBMS</config-type>
	  <config-type>hue-Solr</config-type>
	</configuration-dependencies>
	<restartRequiredAfterChange>true</restartRequiredAfterChange>
      </service>
    </services>
</metainfo>
